<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>bsspclock - BSSP daemon task for managing scheduled events</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:mingw-dvlpr@lists.sourceforge.net" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->
<!--

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#exit_status">EXIT STATUS</a></li>
	<li><a href="#files">FILES</a></li>
	<li><a href="#environment">ENVIRONMENT</a></li>
	<li><a href="#diagnostics">DIAGNOSTICS</a></li>
	<li><a href="#bugs">BUGS</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
</ul>
-->
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>bsspclock - BSSP daemon task for managing scheduled events</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p><strong>bsspclock</strong></p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p><strong>bsspclock</strong> is a background ``daemon'' task that periodically performs
scheduled BSSP activities.  It is spawned automatically by <strong>bsspadmin</strong> in
response to the 's' command that starts operation of the BSSP protocol, and
it is terminated by <strong>bsspadmin</strong> in response to an 'x' (STOP) command.</p>
<p>Once per second, <strong>bsspclock</strong> takes the following action:</p>
<p>First it manages the current state of all links (``spans'').  Specifically,
it infers link state changes (``link cues'') from data rate changes as noted
in the RFX database by <strong>rfxclock</strong>:</p>
<p>If the rate of transmission to a neighbor was zero but is now non-zero, then
transmission to that neighbor resumes.  The applicable ``buffer empty''
semaphore is given (enabling start of a new transmission session) and
the best-efforts and/or reliable ``PDUs ready'' semaphores are given if the
corresponding outbound PDU queues are non-empty (enabling transmission of
PDUs by the link service output task).</p>
<p>If the rate of transmission to a neighbor was non-zero but is now zero, then
transmission to that neighbor is suspended -- i.e., the semaphores triggering
transmission will no longer be given.</p>
<p>If the imputed rate of transmission from a neighbor was non-zero but is now
zero, then all best-efforts transmission acknowledgment timers affecting
transmission to that neighbor are suspended.  This has the effect of extending
the interval of each affected timer by the length of time that the timers
remain suspended.</p>
<p>If the imputed rate of transmission from a neighbor was zero but is now
non-zero, then all best-efforts transmission acknowledgment timers affecting
transmission to that neighbor are resumed.</p>
<p>Then <strong>bsspclock</strong> enqueues for reliable transmission all blocks for which
the best-efforts transmission acknowledgment timeout interval has now expired
but no acknowledgment has yet been received.</p>
<p>
</p>
<hr />
<h1><a name="exit_status">EXIT STATUS</a></h1>
<dl>
<dt><strong><a name="item__220_22">``0''</a></strong>

<dd>
<p><strong>bsspclock</strong> terminated, for reasons noted in the <strong>ion.log</strong> file.  If this
termination was not commanded, investigate and solve the problem identified
in the log file and use <strong>bsspadmin</strong> to restart <strong>bsspclock</strong>.</p>
</dd>
</li>
<dt><strong><a name="item__221_22">``1''</a></strong>

<dd>
<p><strong>bsspclock</strong> was unable to attach to BSSP protocol operations, probably because
<strong>bsspadmin</strong> has not yet been run.</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="files">FILES</a></h1>
<p>No configuration files are needed.</p>
<p>
</p>
<hr />
<h1><a name="environment">ENVIRONMENT</a></h1>
<p>No environment variables apply.</p>
<p>
</p>
<hr />
<h1><a name="diagnostics">DIAGNOSTICS</a></h1>
<p>The following diagnostics may be issued to the <strong>ion.log</strong> log file:</p>
<dl>
<dt><strong><a name="item_bsspclock_can_27t_initialize_bssp_2e">bsspclock can't initialize BSSP.</a></strong>

<dd>
<p><strong>bsspadmin</strong> has not yet initialized BSSP protocol operations.</p>
</dd>
</li>
<dt><strong><a name="item_can_27t_dispatch_events_2e">Can't dispatch events.</a></strong>

<dd>
<p>An unrecoverable database error was encountered.  <strong>bsspclock</strong> terminates.</p>
</dd>
</li>
<dt><strong><a name="item_can_27t_manage_links_2e">Can't manage links.</a></strong>

<dd>
<p>An unrecoverable database error was encountered.  <strong>bsspclock</strong> terminates.</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="bugs">BUGS</a></h1>
<p>Report bugs to &lt;<a href="mailto:ion-dtn-support@lists.sourceforge.net">ion-dtn-support@lists.sourceforge.net</a>&gt;</p>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p>bsspadmin(1), <code>rfxclock(1)</code></p>

</body>

</html>
