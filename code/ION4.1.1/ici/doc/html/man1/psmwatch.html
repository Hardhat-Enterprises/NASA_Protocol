<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>psmwatch - PSM memory partition activity monitor</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:mingw-dvlpr@lists.sourceforge.net" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->
<!--

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#exit_status">EXIT STATUS</a></li>
	<li><a href="#files">FILES</a></li>
	<li><a href="#environment">ENVIRONMENT</a></li>
	<li><a href="#diagnostics">DIAGNOSTICS</a></li>
	<li><a href="#bugs">BUGS</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
</ul>
-->
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>psmwatch - PSM memory partition activity monitor</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p><strong>psmwatch</strong> <em>shared_memory_key</em> <em>memory_size</em> <em>partition_name</em> <em>interval</em> <em>count</em> [ verbose ]</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>For <em>count</em> interations, <strong>psmwatch</strong> sleeps <em>interval</em> seconds and then
invokes the <code>psm_print_trace()</code> function (see <code>psm(3))</code> to report on PSM dynamic
memory management activity in the PSM-managed shared memory partition
identified by <em>shared_memory_key</em> during that interval.  If the optional
<strong>verbose</strong> parameter is specified, the printed PSM activity trace will be
verbose as described in psm(3).</p>
<p>To prevent confusion, the specified <em>memory_size</em> and <em>partition_name</em> are
compared to those declared when this shared memory partition was initially
managed; if they don't match, <strong>psmwatch</strong> immediately terminates.</p>
<p>If <em>interval</em> is zero, <strong>psmwatch</strong> merely prints a current usage summary
for the indicated shared-memory partition and terminates.</p>
<p><strong>psmwatch</strong> is helpful for detecting and diagnosing memory leaks.  For
debugging the ION protocol stack:</p>
<dl>
<dt><strong><a name="item_shared_memory_key"><em>shared_memory_key</em></a></strong>

<dd>
<p>Normally ``65281'', but might be overridden by the value of wmKey in the
.ionconfig file used to configure the node under study.</p>
</dd>
</li>
<dt><strong><a name="item_memory_size"><em>memory_size</em></a></strong>

<dd>
<p>As given by the value of wmKey in the .ionconfig file used to configure the
node under study.  If this value is not stated in the .ionconfig file, the
default value is ``5000000''.</p>
</dd>
</li>
<dt><strong><a name="item_partition_name"><em>partition_name</em></a></strong>

<dd>
<p>Always ``ionwm''.</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="exit_status">EXIT STATUS</a></h1>
<dl>
<dt><strong><a name="item__220_22">``0''</a></strong>

<dd>
<p><strong>psmwatch</strong> has terminated.</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="files">FILES</a></h1>
<p>No configuration files are needed.</p>
<p>
</p>
<hr />
<h1><a name="environment">ENVIRONMENT</a></h1>
<p>No environment variables apply.</p>
<p>
</p>
<hr />
<h1><a name="diagnostics">DIAGNOSTICS</a></h1>
<p>The following diagnostics may be issued to the <strong>ion.log</strong> log file:</p>
<dl>
<dt><strong><a name="item_can_27t_attach_to_psm_2e">Can't attach to psm.</a></strong>

<dd>
<p>ION system error.  One possible cause is that ION has not yet been
initialized on the local computer; run <code>ionadmin(1)</code> to correct this.</p>
</dd>
</li>
<dt><strong><a name="item_can_27t_start_trace_2e">Can't start trace.</a></strong>

<dd>
<p>Insufficient ION working memory to contain trace information.  Reinitialize
ION with more memory.</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="bugs">BUGS</a></h1>
<p>Report bugs to &lt;<a href="mailto:ion-dtn-support@lists.sourceforge.net">ion-dtn-support@lists.sourceforge.net</a>&gt;</p>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p>psm(3), <code>sdrwatch(1)</code></p>

</body>

</html>
